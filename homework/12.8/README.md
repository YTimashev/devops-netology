# Домашнее задание к занятию 12.8 "Резервное копирование баз данных"
---
### Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надежность работы БД и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях: 

1.1 Необходимо восстанавливать данные в полном объеме за предыдущий день.
>В данном случае думаю можно применять все виды/методы резервного копирования, но для надежности работы БД более подойдет метод Полного резервного копирование (Full backup) каждый день.

1.2 Необходимо восстанавливать данные за час до предполагаемой поломки.
>Оптимальным выбором как мне кажеться здесь будет инкрементный бэкап (Incremental backup) - например делаем полный бэкап раз в месяц, раз в сутки промежуточные сохранения измененых блоков данных и крайние бэкапы раз в час. Но думаю что и дифференциальный бэкап (differential backup) - здесь тоже применим. 

1.3* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую/починеную БД?
>Первое что приходит в голову - это репликация, где в работу БД включается слейв, в котором сохранялись инкрементные бэкапы.

*Приведите ответ в свободной форме.*

---

### Задание 2. PostgreSQL

2.1 С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).
>```pg_dump dbname > dumpfile``` это команда с помощью которой результат записывается в стандартный вывод, т.е. мы сохраняем(резервируем) результат в текстовый файл. данная команда может применяться с различными опциями/параметрами по сохранению данных - сохранение отдельных частей БД, указанием хоста, пользователя, формата сжатия файла и т.д.
> команда ```psql dbname < dumpfile``` позволяет нам загружать в БД ранее сохраненные текстовые файлы БД, здесь также как и в ```pg_dump``` используются различные параметры. Для востановления данных отличного от обычного текста используется команда ```pg_restore```

2.1* Возможно ли автоматизировать этот процесс? Если да, то как?
>Для автоматического сохранения БД можно создать/использовать скрипт сохраненый в файл, который будет запускаться по расписанию установленному в планировщике cron.

*Приведите ответ в свободной форме.*

---

### Задание 3. MySql

3.1 С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySql. 
> В примере этой команды используется опция, которая извлекает из из таблицы LSN последней успешной (полной или частичной) копии и отатлкиваясь от нее производит резервное копирование.

      mysqlbackup --defaults-file=/home/dbadmin/my.cnf \
      --incremental --incremental-base=history:last_backup \
      --backup-dir=/home/dbadmin/temp_dir \
      --backup-image=incremental_image1.bi \
      backup-to-image
   
3.1* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?

*Приведите ответ в свободной форме.*
>Репликация позволяет автоматически копировать несколько копий данных из "master" в "slave" базы данных, при репликации можно распределять нагрузку между серверами тем самым повышая производительность, при проведении анализа специалисты могут работать с одной из подчиненных баз данных, не влияя на производительность основной базы данных. Ну и конечно самое как мне кажеться основное это надежность сохранения данных и быстрое переключение бд в случае поломки, о чем я уже отвечал в первом вопросе.

---

Задания,помеченные звездочкой * - дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

